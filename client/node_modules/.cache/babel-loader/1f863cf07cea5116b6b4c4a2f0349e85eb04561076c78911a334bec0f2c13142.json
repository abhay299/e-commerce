{"ast":null,"code":"import _toConsumableArray from\"D:/reactWebApp/e-commerce/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"D:/reactWebApp/e-commerce/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/reactWebApp/e-commerce/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/reactWebApp/e-commerce/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"D:/reactWebApp/e-commerce/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useEffect,useState}from'react';import{styled}from'styled-components';// import { popularProducts } from '../data';\nimport Product from'./Product';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tpadding: 20px;\\n\\tdisplay: flex;\\n\\tflex-wrap: wrap;\\n\\tjustify-content: space-between;\\n\"])));var Products=function Products(_ref){var cat=_ref.cat,filter=_ref.filter,sort=_ref.sort;// console.log(cat, filter, sort);\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredProducts=_useState4[0],setFilteredProducts=_useState4[1];useEffect(function(){var getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(cat?\"http://localhost:5000/api/products?category=\".concat(cat):\"http://localhost:5000/api/products\");case 3:res=_context.sent;setProducts(res.data);// console.log(res);\n_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getProducts(){return _ref2.apply(this,arguments);};}();getProducts();},[cat]);useEffect(function(){cat&&setFilteredProducts(products.filter(function(item){return(// console.log(\"Item in filter: \", item);\nObject.entries(filter).every(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return item[key].includes(value);}));}));},[products,cat,filter]);useEffect(function(){if(sort===\"latest\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.createdAt-b.createdAt;});});}else if(sort===\"asc\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.price-b.price;});});}else{setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return b.price-a.price;});});}},[sort]);return/*#__PURE__*/_jsx(Container,{children:cat?filteredProducts.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);}):products.slice(0,8).map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);})});};export default Products;","map":{"version":3,"names":["React","useEffect","useState","styled","Product","axios","jsx","_jsx","Container","div","_templateObject","_taggedTemplateLiteral","Products","_ref","cat","filter","sort","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","filteredProducts","setFilteredProducts","getProducts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","console","log","stop","apply","arguments","item","Object","entries","every","_ref3","_ref4","key","value","includes","_toConsumableArray","a","b","createdAt","price","children","map","id","slice"],"sources":["D:/reactWebApp/e-commerce/client/src/components/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { styled } from 'styled-components';\r\n// import { popularProducts } from '../data';\r\nimport Product from './Product';\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n\tpadding: 20px;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: space-between;\r\n`;\r\n\r\nconst Products = ({ cat, filter, sort }) => {\r\n\t// console.log(cat, filter, sort);\r\n\tconst [products, setProducts] = useState([]);\r\n\tconst [filteredProducts, setFilteredProducts] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getProducts = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\tcat\r\n\t\t\t\t\t\t? `http://localhost:5000/api/products?category=${cat}`\r\n\t\t\t\t\t\t: \"http://localhost:5000/api/products\"\r\n\t\t\t\t);\r\n\t\t\t\tsetProducts(res.data);\r\n\t\t\t\t// console.log(res);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tgetProducts();\r\n\t}, [cat]);\r\n\r\n\tuseEffect(() => {\r\n\t\tcat && setFilteredProducts(\r\n\t\t\tproducts.filter(item =>\r\n\t\t\t\t// console.log(\"Item in filter: \", item);\r\n\t\t\t\tObject.entries(filter).every(([key, value]) =>\r\n\t\t\t\t\titem[key].includes(value)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t);\r\n\t}, [products, cat, filter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (sort === \"latest\") {\r\n\t\t\tsetFilteredProducts((prev) =>\r\n\t\t\t\t[...prev].sort((a, b) => a.createdAt - b.createdAt)\r\n\t\t\t);\r\n\t\t} else if (sort === \"asc\") {\r\n\t\t\tsetFilteredProducts((prev) =>\r\n\t\t\t\t[...prev].sort((a, b) => a.price - b.price)\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tsetFilteredProducts((prev) =>\r\n\t\t\t\t[...prev].sort((a, b) => b.price - a.price)\r\n\t\t\t);\r\n\t\t}\r\n\t}, [sort]);\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t{\r\n\t\t\t\tcat\r\n\t\t\t\t\t? filteredProducts.map((item) => <Product item={item} key={item.id} />)\r\n\t\t\t\t\t: products\r\n\t\t\t\t\t\t.slice(0, 8)\r\n\t\t\t\t\t\t.map((item) => <Product item={item} key={item.id} />)\r\n\t\t\t}\r\n\t\t</Container>\r\n\t)\r\n};\r\n\r\nexport default Products;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}